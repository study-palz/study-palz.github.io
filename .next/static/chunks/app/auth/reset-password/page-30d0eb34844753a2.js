(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48],{3451:function(e,s,n){Promise.resolve().then(n.bind(n,6500))},1521:function(e,s,n){"use strict";n.d(s,{FT:function(){return i}});var a=n(2265),r=n(7437);let t=["as","disabled"];function i({tagName:e,disabled:s,href:n,target:a,rel:r,role:t,onClick:i,tabIndex:o=0,type:d}){e||(e=null!=n||null!=a||null!=r?"a":"button");let l={tagName:e};if("button"===e)return[{type:d||"button",disabled:s},l];let u=a=>{var r;if(!s&&("a"!==e||(r=n)&&"#"!==r.trim())||a.preventDefault(),s){a.stopPropagation();return}null==i||i(a)};return"a"===e&&(n||(n="#"),s&&(n=void 0)),[{role:null!=t?t:"button",disabled:void 0,tabIndex:s?void 0:o,href:n,target:"a"===e?a:void 0,"aria-disabled":s||void 0,rel:"a"===e?r:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},l]}let o=a.forwardRef((e,s)=>{let{as:n,disabled:a}=e,o=function(e,s){if(null==e)return{};var n={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(s.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t),[d,{tagName:l}]=i(Object.assign({tagName:n,disabled:a},o));return(0,r.jsx)(l,Object.assign({},o,d,{ref:s}))});o.displayName="Button",s.ZP=o},7648:function(e,s,n){"use strict";n.d(s,{default:function(){return r.a}});var a=n(2972),r=n.n(a)},9376:function(e,s,n){"use strict";var a=n(5475);n.o(a,"usePathname")&&n.d(s,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(s,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(s,{useSearchParams:function(){return a.useSearchParams}})},4076:function(e,s,n){"use strict";var a=n(6760),r=n.n(a),t=n(2265),i=n(1521),o=n(7701),d=n(7437);let l=t.forwardRef((e,s)=>{let{as:n,bsPrefix:a,variant:t="primary",size:l,active:u=!1,disabled:c=!1,className:f,...h}=e,m=(0,o.vE)(a,"btn"),[p,{tagName:v}]=(0,i.FT)({tagName:n,disabled:c,...h});return(0,d.jsx)(v,{...p,...h,ref:s,disabled:c,className:r()(f,m,u&&"active",t&&"".concat(m,"-").concat(t),l&&"".concat(m,"-").concat(l),h.href&&c&&"disabled")})});l.displayName="Button",s.Z=l},6500:function(e,s,n){"use strict";n.d(s,{default:function(){return v}});var a=n(7437),r=n(2265),t=n(9376),i=n(9501),o=n(3842),d=n(4422),l=n(7648),u=n(99),c=n(4402),f=n(4670),h=n(9420),m=n(8390),p=n(4076);function v(){var e,s,n;(0,t.useRouter)();let v=null!==(n=(0,t.useSearchParams)().get("token"))&&void 0!==n?n:void 0,[w,j]=(0,r.useState)("loading"),b=d.Ry({password:d.Z_().min(6,"Min 6 chars").required("Required"),confirmPassword:d.Z_().oneOf([d.iH("password")],"Passwords must match").required("Required")}),{register:x,handleSubmit:P,formState:{errors:y}}=(0,i.cI)({resolver:(0,o.X)(b)});(0,r.useEffect)(()=>{v&&fetch("/api/auth/validate-token?token=".concat(encodeURIComponent(v))).then(e=>e.json()).then(e=>j(e.valid?"ready":"invalid"))},[v]);let g=async e=>{await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:v,newPassword:e.password})}),j("success")};return"loading"===w?(0,a.jsx)("p",{children:"Validating linkâ€¦"}):"invalid"===w?(0,a.jsxs)("p",{children:["Link is invalid or expired. ",(0,a.jsx)(l.default,{href:"/auth/forgot-password",children:"Try again"})]}):"success"===w?(0,a.jsxs)("p",{children:["Password reset! ",(0,a.jsx)(l.default,{href:"/auth/signin",children:"Sign in"})]}):(0,a.jsx)(u.default,{className:"py-5",children:(0,a.jsx)(c.default,{className:"justify-content-center",children:(0,a.jsx)(f.default,{md:6,children:(0,a.jsx)(h.Z,{children:(0,a.jsxs)(h.Z.Body,{children:[(0,a.jsx)("h2",{className:"mb-4",children:"Reset Password"}),(0,a.jsxs)(m.Z,{onSubmit:P(g),children:[(0,a.jsxs)(m.Z.Group,{className:"mb-3",children:[(0,a.jsx)(m.Z.Label,{children:"New Password"}),(0,a.jsx)(m.Z.Control,{type:"password",...x("password"),isInvalid:!!y.password}),(0,a.jsx)(m.Z.Control.Feedback,{type:"invalid",children:null===(e=y.password)||void 0===e?void 0:e.message})]}),(0,a.jsxs)(m.Z.Group,{className:"mb-3",children:[(0,a.jsx)(m.Z.Label,{children:"Confirm Password"}),(0,a.jsx)(m.Z.Control,{type:"password",...x("confirmPassword"),isInvalid:!!y.confirmPassword}),(0,a.jsx)(m.Z.Control.Feedback,{type:"invalid",children:null===(s=y.confirmPassword)||void 0===s?void 0:s.message})]}),(0,a.jsx)(p.Z,{type:"submit",className:"w-100",children:"Reset Password"})]})]})})})})})}}},function(e){e.O(0,[972,75,915,971,117,744],function(){return e(e.s=3451)}),_N_E=e.O()}]);